---
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: nginx
  namespace: dev
spec:
  releaseName: nginx
  chart:
    git: git@github.com:ranvijay12/fluxcd-helm-operator.git
    path: webservice
    ref: master
  rollback:
     enable: true
  values:
    fullnameOverride: nginx
    nameOverride: nginx
    image:
      repository: nginx
      tag: latest
    replicaCount: 1
    hpa:
      enabled: false
    liveness:
      port: 80
      path: /
    readiness:
      port: 80
      path: /
    ports:
    - name: http
      containerPort: 80
      protocol: TCP
    annotations:
        prometheus.io/path: "/nginx/prometheus"
        prometheus.io/port: "80"
        prometheus.io/scrape: "true" 
